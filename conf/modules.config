process {
    withName: 'PICARD_COLLECTINSERTSIZEMETRICS' {
            ext.args = {
                def ref = params.genomes[params.genome]?.reference_fasta ?: params.genomes[params.genome]?.fasta
                ref ? "--REFERENCE_SEQUENCE ${ref}" : ''
            }
            publishDir = [
                mode: params.publish_dir_mode,
                path: { "${params.outdir}/InsertSize_out/${meta.id}" },
                pattern: "*.{txt,pdf}"
            ]
    }

    withName: 'GATKSV_GATHERSAMPLEEVIDENCE' {
            publishDir = [
                mode: params.publish_dir_mode,
                path: { "${params.outdir}/GSE/${meta.id}" },
                pattern: "call-*"
            ]
    }

    withName: 'GATKSV_EVIDENCEQC' {
            publishDir = [
                mode: params.publish_dir_mode,
                path: { "${params.outdir}/EVIDQC" }
            ]
    }

    withName: 'SAMPLE_QC' {
            publishDir = [
                mode: params.publish_dir_mode,
                path: { "${params.outdir}/SAMPLEQC/${task.tag}" },
                pattern: "*.{tsv,pdf}"
            ]
    }

    withName: 'BATCHING' {
            publishDir = [
                mode: params.publish_dir_mode,
                path: { "${params.outdir}/BATCHING/${task.tag}" }
            ]
    }
}
