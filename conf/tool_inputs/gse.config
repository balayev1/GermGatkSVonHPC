def genome_resources = params.genomes?.get(params.genome as String) ?: [:]
def resolved_fasta = params.reference_fasta ?: params.fasta ?: genome_resources.reference_fasta ?: genome_resources.fasta

params.tool_inputs = params.tool_inputs ?: [:]
params.tool_inputs.gse = [
    "GatherSampleEvidence.collect_coverage"            : params.gse_collect_coverage,
    "GatherSampleEvidence.collect_pesr"                : params.gse_collect_pesr,
    "GatherSampleEvidence.run_localize_reads"          : params.gse_run_localize_reads,
    "GatherSampleEvidence.run_module_metrics"          : params.gse_run_module_metrics,
    "GatherSampleEvidence.reference_fasta"             : resolved_fasta,
    "GatherSampleEvidence.reference_index"             : params.reference_index ?: params.fasta_fai ?: genome_resources.reference_index ?: genome_resources.fasta_fai,
    "GatherSampleEvidence.reference_dict"              : params.reference_dict ?: genome_resources.reference_dict,
    // Optional: only set if explicitly provided by user.
    "GatherSampleEvidence.reference_bwa_alt"           : params.reference_bwa_alt ?: null,
    "GatherSampleEvidence.reference_bwa_amb"           : params.reference_bwa_amb ?: null,
    "GatherSampleEvidence.reference_bwa_ann"           : params.reference_bwa_ann ?: null,
    "GatherSampleEvidence.reference_bwa_bwt"           : params.reference_bwa_bwt ?: null,
    "GatherSampleEvidence.reference_bwa_pac"           : params.reference_bwa_pac ?: null,
    "GatherSampleEvidence.reference_bwa_sa"            : params.reference_bwa_sa ?: null,
    "GatherSampleEvidence.reference_version"           : params.reference_version ?: genome_resources.reference_version,
    "GatherSampleEvidence.primary_contigs_list"        : params.primary_contigs_list ?: genome_resources.primary_contigs_list,
    "GatherSampleEvidence.primary_contigs_fai"         : params.primary_contigs_fai ?: genome_resources.primary_contigs_fai,
    "GatherSampleEvidence.preprocessed_intervals"      : params.preprocessed_intervals ?: genome_resources.preprocessed_intervals,
    "GatherSampleEvidence.wham_include_list_bed_file"  : params.wham_include_list_bed_file ?: genome_resources.wham_include_list_bed_file,
    "GatherSampleEvidence.manta_region_bed"            : params.manta_region_bed ?: genome_resources.manta_region_bed,
    "GatherSampleEvidence.manta_region_bed_index"      : params.manta_region_bed_index ?: genome_resources.manta_region_bed_index,
    "GatherSampleEvidence.sd_locs_vcf"                 : params.sd_locs_vcf ?: genome_resources.sd_locs_vcf,
    "GatherSampleEvidence.mei_bed"                     : params.mei_bed ?: genome_resources.mei_bed,
    // Optional: required only for MELT-enabled runs.
    "GatherSampleEvidence.melt_standard_vcf_header"    : params.melt_standard_vcf_header ?: null,
    "GatherSampleEvidence.samtools_cloud_docker"       : params.samtools_cloud_docker,
    "GatherSampleEvidence.sv_base_mini_docker"         : params.sv_base_mini_docker,
    "GatherSampleEvidence.sv_pipeline_docker"          : params.sv_pipeline_docker,
    "GatherSampleEvidence.manta_docker"                : params.manta_docker,
    "GatherSampleEvidence.wham_docker"                 : params.wham_docker,
    "GatherSampleEvidence.scramble_docker"             : params.scramble_docker,
    "GatherSampleEvidence.genomes_in_the_cloud_docker" : params.genomes_in_the_cloud_docker,
    "GatherSampleEvidence.gatk_docker"                 : params.gatk_docker,
    "GatherSampleEvidence.cloud_sdk_docker"            : params.cloud_sdk_docker
]
